近日在尝试向U盘中安装一套系统，这样子即使出门也不用一直背着沉重的笔记本电脑了。但是在安装过程中还是遇到的不少网上其他教程没有提到的问题。我在本文中将予以描述。

##1.U盘的选择
U盘的读写性能对于系统的稳定运行有着至关重要的意义，现在各大厂商都在宣传自己的产品读写性能有多好，但是宣传的时候往往都描述的是读取速度而不是写入速度，所以应该购买写入速度的快的U盘。
当然，USB3.0是标配就不说了。

U盘的写入速度慢会导致在系统安装的时安装速度越来越慢，以至于本应该是十几分钟的安装过程一晚上都没有安装完成。

我尝试了金士顿和闪迪的四款U盘，金士顿的USB3.0和USB3.1产品全军覆没，闪迪的一款U盘较慢勉强可以，另一款闪迪U盘在宣传上声称至尊高速并且写明了写入速度达到20MB/s（型号：CZ48），亲测可用。

##2.镜像下载
从CentOS官方我们可以下载到CentOS7的安装镜像，我们需要下载DVD版本的镜像，这样安装之后的操作系统才可以有图像化界面，附上一个链接，这个链接里是官方提供的各大镜像站的下载链接：[http://isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1708.iso](http://isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1708.iso)

##3.系统安装
用U盘启动的方式安装U盘系统感觉还是略麻烦的。所以我采取的是虚拟机的安装模式，其实就是将安装镜像跑在虚拟机里，然后将系统写入到U盘。这个操作有一个好处就是可以少用一个U盘，而且避免在烧录安装U盘时烧录速度越来越慢最终不动的情况。
用虚拟机安装操作系统的博客已经很多了，我就不再写过程了，我只描述一下其中我踩过的坑：

 - USB接口版本：从某个版本开始，linux内核已经支持USB3.0了，所以在调整USB版本时应选择USB3.0以追求最快的速度。
 - 启动方式：如果你希望你U盘里的操作系统以UEFI的模式启动就应该划分/efi分区，而不是/boot分区。
 - swap分区：因为U盘的读写速度和机械硬盘或者固态硬盘比起来都是很慢的，所以swap分区对系统的加速效果就不是很明显，反而可能会拖慢文件读写的速度，所以我建议不划分swap分区。也就是说操作系统的所有缓存都在内存中完成，避免受到USB3.0传输速度的限制，亲测有效果。
##4.系统配置
虽然有图形化界面，但是终端还是不能少的，但是新安装的CentOS并没有启动终端的快捷键，我自己写了一篇博客描述了如何给终端添加快捷键，传送门：
[http://blog.csdn.net/qq_36731677/article/details/78248579](http://blog.csdn.net/qq_36731677/article/details/78248579)

