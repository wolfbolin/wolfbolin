<p>我初学Nginx服务器配置，有些操作记不住，所以总结一下放一起。包含了yum安装和编译安装的Nginx。</p>
<h2>0.环境说明</h2>
<p>服务器1：腾讯云 CentOS7.3<br />
服务器2：树莓派3B CentOS-Userland-7-armv7hl<br />
腾讯云上的Nginx是使用yum安装的Nginx<br />
树莓派上的Nginx是使用编译安装的方式安装的</p>
<h2>1.Nginx安装</h2>
<p>对于云服务器，在系统开机后可通过<code>yum update</code>来更新yum数据，之后使用命令<code>yum install nginx</code>来安装Nginx。<br />
对于树莓派上的Nginx，yum的方式不能（我不会）安装Nginx，所以我采用编译安装的方式安装，安装方式见链接：<a href="http://blog.csdn.net/qq_36731677/article/details/78762902">http://blog.csdn.net/qq_36731677/article/details/78762902</a></p>
<h2>2.Nginx安装目录</h2>
<p>yum安装Nginx的配置文件目录：<code>/etc/nginx/</code><br />
编译安装的Nginx的配置文件目录：<code>/usr/local/nginx/conf/</code></p>
<h2>3.Nginx配置文件</h2>
<p>无论是如何安装的Nginx，配置文件的修改方式都是一样的，只需要在每次修改配置文件后重启Nginx即可使用新的配置文件运行。</p>
<h3>3.1 Nginx配置结构</h3>
<pre><code>http {
    xxxxx
    ...
    xxxxx
    server {
        listen 80;
        server_name xxxxxx xxxxxx;
        #include /etc/nginx/default.d/*.conf;
        location xxxx{
            xxxxx
            ...
            xxxxx
        }
        error_page   500 502 503 504  /50x.html;
    }
}
</code></pre>

<h3>3.2 Nginx代理html</h3>
<pre><code>location / {
    root   /home/www;
    index  index.html index.htm;
}
</code></pre>

<h3>3.3 Nginx路径代理（多路径）</h3>
<pre><code>location /abc/ {
    alias /home/www/def/;
}
</code></pre>

<h3>3.4 Nginx代理站点</h3>
<pre><code>location / {
    proxy_set_header User-Agent &quot;example.com&quot;;
    proxy_pass http://test.com;
}
</code></pre>

<h3>3.5 HTTP403重定向</h3>
<pre><code>location / {
    rewrite ^/(.*)$ http://www.baidu.com/$1 permanent;
}
</code></pre>

<h3>3.6 Nginx错误页</h3>
<pre><code>error_page 404 /404.html;
location = /40x.html {
    root   /home/www/err
}
error_page   500 502 503 504  /50x.html;
location = /50x.html {
    root   /home/www/err;
}
</code></pre>

<h3>3.7 Nginx代理PHP7</h3>
<p>需要开启php-fpm<br />
编译安装的Nginx开启方式：<code>/usr/local/php/sbin/php-fpm</code>(编译安装的Nginx自带fpm模块)<br />
yum安装的Nginx开启php-fpm方式：<code>systemctl start php-fpm</code>(fpm模块安装使用命令<code>yum install php70w-fpm</code>)</p>
<pre><code>location ~\.php$ {
    root /home/www;
    fastcgi_pass   127.0.0.1:9000;
    fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include        fastcgi_params;
}
</code></pre>

<p>我懂的操作总结完毕，下班睡觉去。</p>